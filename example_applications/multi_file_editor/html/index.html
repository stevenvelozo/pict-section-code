<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Multi-File Editor - Pict Example</title>
		<!-- PICT Dynamic View CSS Container -->
		<style id="PICT-CSS"></style>
		<!-- Red Rock Mesa Theme â€” Pict Example App -->
		<style>
			*, *::before, *::after { box-sizing: border-box; }
			body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background: #FAEDCD; color: #264653; }

			/* --- Header Bar --- */
			.pict-example-header { display: flex; align-items: stretch; background: #264653; border-bottom: 3px solid #E76F51; }
			.pict-example-badge { background: #E76F51; color: #fff; padding: 0.6rem 1rem; font-size: 0.7rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.1em; display: flex; align-items: center; gap: 0.5rem; }
			.pict-example-badge svg { width: 14px; height: 14px; fill: #fff; flex-shrink: 0; }
			.pict-example-app-name { padding: 0.6rem 1rem; color: #FAEDCD; font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; }
			.pict-example-module { margin-left: auto; padding: 0.6rem 1rem; color: #D4A373; font-size: 0.75rem; display: flex; align-items: center; letter-spacing: 0.03em; }

			/* --- Layout --- */
			.editor-layout { display: flex; min-height: calc(100vh - 44px); }

			/* --- File Sidebar --- */
			.file-sidebar { width: 220px; background: #264653; color: #FAEDCD; flex-shrink: 0; overflow-y: auto; display: flex; flex-direction: column; }
			.file-sidebar-header { padding: 0.75rem 1rem; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.06em; border-bottom: 1px solid rgba(250,237,205,0.15); display: flex; justify-content: space-between; align-items: center; }
			.file-sidebar-header button { background: #E76F51; color: #fff; border: none; padding: 0.25rem 0.6rem; border-radius: 3px; font-size: 0.7rem; font-weight: 600; cursor: pointer; }
			.file-sidebar-header button:hover { background: #D4573E; }
			.file-entry { padding: 0.55rem 1rem; cursor: pointer; font-size: 0.85rem; border-left: 3px solid transparent; transition: background 0.15s; display: flex; align-items: center; gap: 0.3rem; }
			.file-entry:hover { background: rgba(250,237,205,0.08); }
			.file-entry.active { border-left-color: #E76F51; background: rgba(250,237,205,0.12); }
			.file-entry .file-name { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
			.file-entry .file-ext { color: #D4A373; font-size: 0.7rem; }
			.file-entry .file-delete { background: none; border: none; color: rgba(250,237,205,0.3); font-size: 1rem; cursor: pointer; padding: 0 0.2rem; line-height: 1; }
			.file-entry .file-delete:hover { color: #E76F51; }

			/* --- Editor Main --- */
			.editor-main { flex: 1; padding: 1.25rem; overflow: auto; }
			.editor-toolbar { display: flex; align-items: center; gap: 8px; margin-bottom: 1rem; flex-wrap: wrap; }
			.editor-toolbar .current-file { font-weight: 600; font-size: 0.95rem; color: #264653; }
			.editor-toolbar .language-badge { background: #E76F51; color: #fff; font-size: 0.7rem; font-weight: 600; padding: 0.15rem 0.5rem; border-radius: 3px; text-transform: uppercase; letter-spacing: 0.03em; }
			.editor-toolbar .spacer { flex: 1; }
			.editor-toolbar button { background: #264653; color: #FAEDCD; border: none; padding: 0.45rem 1rem; border-radius: 4px; font-size: 0.85rem; font-weight: 600; cursor: pointer; }
			.editor-toolbar button:hover { background: #1A3340; }

			/* --- Editor Container --- */
			#EditorContainer { background: #fff; border: 1px solid #D4A373; border-top: 4px solid #E76F51; border-radius: 6px; padding: 1.25rem; box-shadow: 0 2px 8px rgba(38,70,83,0.08); min-height: 400px; }
		</style>
		<script src="./codejar.js" type="text/javascript"></script>
		<script src="./pict.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			function loadFile(pFileKey)
			{
				if (typeof(_Pict) !== 'undefined' && _Pict.PictApplication)
				{
					_Pict.PictApplication.loadFile(pFileKey);
				}
			}
			function saveFile()
			{
				if (typeof(_Pict) !== 'undefined' && _Pict.PictApplication)
				{
					_Pict.PictApplication.saveCurrentFile();
				}
			}
			function newFile()
			{
				var tmpFilename = prompt('Enter a filename (e.g., utils.js):');
				if (tmpFilename && tmpFilename.trim())
				{
					if (typeof(_Pict) !== 'undefined' && _Pict.PictApplication)
					{
						_Pict.PictApplication.createNewFile(tmpFilename.trim());
					}
				}
			}
			function deleteFile(pFileKey)
			{
				if (confirm('Delete ' + pFileKey + '?'))
				{
					if (typeof(_Pict) !== 'undefined' && _Pict.PictApplication)
					{
						_Pict.PictApplication.deleteFile(pFileKey);
					}
				}
			}
			Pict.safeOnDocumentReady(() => { Pict.safeLoadPictApplication(MultiFileEditorExample, 1); });
		</script>
	</head>
	<body>
		<div class="pict-example-header">
			<div class="pict-example-badge">
				<svg viewBox="0 0 16 16"><polygon points="8,1 10,6 16,6 11,9.5 13,15 8,11.5 3,15 5,9.5 0,6 6,6"/></svg>
				Pict Example
			</div>
			<div class="pict-example-app-name">Multi-File Editor</div>
			<div class="pict-example-module">pict-section-code</div>
		</div>
		<div class="editor-layout">
			<div class="file-sidebar">
				<div class="file-sidebar-header">
					<span>Files</span>
					<button type="button" onclick="newFile()">+ New</button>
				</div>
				<div id="FileSidebarList"></div>
			</div>
			<div class="editor-main">
				<div class="editor-toolbar">
					<span id="CurrentFileName" class="current-file">No file selected</span>
					<span id="LanguageBadge" class="language-badge"></span>
					<span class="spacer"></span>
					<button type="button" onclick="saveFile()">Save</button>
				</div>
				<div id="EditorContainer"></div>
			</div>
		</div>
		<script src="./multi_file_editor_example.min.js" type="text/javascript"></script>
	</body>
</html>
